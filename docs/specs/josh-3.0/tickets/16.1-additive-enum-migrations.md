# Ticket 16.1 — Additive Enum Migrations

## Phase

Phase 16 — Schema Foundation

---

## Objective

Extend existing enums to support JOSH 3.0 coordination paths without modifying runtime logic or altering existing enum values.

---

## Produces

New enum values added to existing types:

### profile_state

- complete_invited

### conversation_mode

- interviewing_abbreviated
- awaiting_social_choice
- post_activity_checkin
- pending_plan_confirmation

### learning_signal_type

- solo_activity_attended
- solo_activity_skipped
- solo_do_again_yes
- solo_do_again_no
- solo_bridge_accepted

One additive migration file under:

supabase/migrations/

---

## Consumes

Existing enum types created previously:

- profile_state
- conversation_mode
- learning_signal_type

---

## Allowed

- Additive enum modifications
- Creation of a single migration file

---

## Forbidden

- Dropping enums
- Reordering enum values
- Recreating enum types
- Table rewrites
- Runtime code changes
- RLS changes
- Data backfills

---

## Wiring Requirements

- Migration must apply cleanly to staging
- Migration must be idempotent (`IF NOT EXISTS`)
- Migration must not modify or invalidate existing rows
- No router or runtime changes required

---

## Verification

- Migration applies successfully
- Running migration twice does not error
- Existing enum values remain intact
- pnpm lint passes
- pnpm typecheck passes
- pnpm test passes
- pnpm build passes
- pnpm run doctor passes

---

## Downstream Impact

Required for:

- Phase 17 (Solo Coordination)
- Phase 19 (Invited Path)
- Phase 21 (Hard Filters)
- Phase 23 (Learning Signals Expansion)

Downstream tickets depend on these enum values for persistence and state transitions.
