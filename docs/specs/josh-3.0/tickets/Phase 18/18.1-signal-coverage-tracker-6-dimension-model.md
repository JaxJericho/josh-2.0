# Ticket 18.1 — Signal Coverage Tracker: 6-Dimension Model (M)

## Role

Principal Conversation Engine Engineer (interview state machine, signal coverage logic, adaptive question targeting)

## Phase

Phase 18 — 6-Dimension Profile System

## Complexity

M

## What This Ticket Builds

Replaces the legacy 12-factor signal coverage tracker with a 3.0 coverage system that tracks:

- 6 coordination dimensions
- 3 coordination signals

This new coverage model becomes the source of truth for:

- interview completeness (`mvpComplete`)
- determining `nextTarget`
- selecting the next interview question

## Why It Matters

Phase 18 is a coordinated replace. The interview engine cannot safely migrate from the 12-factor model to the 6-dimension model unless the coverage tracker is updated first. Downstream tickets in Phase 18 depend on this new coverage shape to avoid mixed 2.0/3.0 behavior. :contentReference[oaicite:1]{index=1}

## Behavioral Constraints

- No database schema changes.
- No migrations.
- No new runtime flows outside the interview engine.
- Do not keep any dual-mode tracker (no “support both 12 and 6” logic).
- Remove all references to:
  - `fingerprintCoveredCount`
  - `FINGERPRINT_FACTOR_KEYS`
  - any 2.0 factor key names inside the coverage layer
- Coverage completion must follow the Phase 18 thresholds exactly:
  - `mvpComplete = true` only when all 6 dimensions are >= 0.55 and all 3 signals are >= 0.60. :contentReference[oaicite:2]{index=2}

## Schema Changes

None.

## Runtime Changes

Interview coverage evaluation and question targeting only.

## Dependencies

Must be complete before this ticket runs:

- Phase 17 complete (type system + holistic extraction types exist).
- Existing interview engine code present in:
  - `packages/core/src/interview/signal-coverage.ts`
  - `packages/core/src/interview/state.ts` :contentReference[oaicite:3]{index=3}

Produces for downstream tickets:

- Updated coverage return shape consumed by Phase 18 interview/state logic. :contentReference[oaicite:4]{index=4}

## Deliverables

### 1) Replace Factor Keys With 3.0 Keys

Replace `FINGERPRINT_FACTOR_KEYS` (12 values) with: :contentReference[oaicite:5]{index=5}

- `COORDINATION_DIMENSION_KEYS`:
  - `social_energy`
  - `social_pace`
  - `conversation_depth`
  - `adventure_orientation`
  - `group_dynamic`
  - `values_proximity`
- `COORDINATION_SIGNAL_KEYS`:
  - `scheduling_availability`
  - `notice_preference`
  - `coordination_style`

### 2) Update getSignalCoverageStatus(profile) Return Shape

Replace return shape with: :contentReference[oaicite:6]{index=6}

- `coveredDimensions: string[]`
- `uncoveredDimensions: string[]`
- `coveredSignals: string[]`
- `uncoveredSignals: string[]`
- `mvpComplete: boolean` — true when all 6 dimensions >= 0.55 AND all 3 signals >= 0.60
- `nextTarget: string | null`

### 3) Update selectNextQuestion()

Update `selectNextQuestion()` to target uncovered dimensions and signals. :contentReference[oaicite:7]{index=7}

### 4) Update buildInterviewTransitionPlan()

Update `buildInterviewTransitionPlan()` in `state.ts` to use the updated return shape. :contentReference[oaicite:8]{index=8}

### 5) Remove 2.0 Coverage References

Remove all references to:

- `fingerprintCoveredCount`
- `FINGERPRINT_FACTOR_KEYS` :contentReference[oaicite:9]{index=9}

## Verification Checklist

- Unit tests:
  - `mvpComplete = true` when all 6 dimensions + 3 signals meet thresholds :contentReference[oaicite:10]{index=10}
  - `mvpComplete = false` when any is below threshold :contentReference[oaicite:11]{index=11}
  - `selectNextQuestion()` does not target already-covered dimensions :contentReference[oaicite:12]{index=12}
- Behavior checks (explicit):
  - A profile with all 6 dimensions at 0.60 and all 3 signals at 0.65 returns `mvpComplete = true` :contentReference[oaicite:13]{index=13}
  - A profile missing `conversation_depth` confidence returns `mvpComplete = false` :contentReference[oaicite:14]{index=14}
  - No reference to `fingerprintCoveredCount` or any 2.0 factor name remains :contentReference[oaicite:15]{index=15}
- Repo gates:
  - `pnpm lint`
  - `pnpm typecheck`
  - `pnpm test` (known pre-existing failure on main may still exist; if so, prove it’s failing on main too)
  - `pnpm build`

## Completion Criteria

Ticket is complete when:

- `packages/core/src/interview/signal-coverage.ts` implements the 6-dimension + 3-signal coverage model and returns the updated shape. :contentReference[oaicite:16]{index=16}
- `packages/core/src/interview/state.ts` consumes the updated return shape in `buildInterviewTransitionPlan()`. :contentReference[oaicite:17]{index=17}
- All references to 2.0 coverage constructs are removed (`fingerprintCoveredCount`, `FINGERPRINT_FACTOR_KEYS`, and 2.0 factor names). :contentReference[oaicite:18]{index=18}
- Unit tests for thresholds and targeting behavior are added and passing. :contentReference[oaicite:19]{index=19}
- Changes are committed and pushed on `ticket/18.1-signal-coverage-tracker-6-dimension-model`.
- Final summary lists EVERY created/changed file with FULL repo-relative paths.
